<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <title>Simple Test</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
</head>

<body style="padding: 50px; font-family: Arial;">
  <h1>Simple Notification Test</h1>
  <button onclick="testNotif()" style="padding: 10px 20px; font-size: 16px;">Click Me</button>

  <script>
    // Inline notification system for testing
    window.__notificationCallbacks = {};

    function showNotification(message, type, onConfirm) {
      const container = document.getElementById('notif-container') || (() => {
        const c = document.createElement('div');
        c.id = 'notif-container';
        c.style.cssText = 'position: fixed; top: 20px; right: 20px; z-index: 99999; max-width: 400px;';
        document.body.appendChild(c);
        return c;
      })();

      const id = 'notif-' + Date.now();
      const notif = document.createElement('div');
      notif.id = id;
      notif.style.cssText = `
        background: white;
        border-radius: 15px;
        box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        padding: 20px;
        margin-bottom: 15px;
        border-left: 5px solid #17a2b8;
      `;

      if (type === 'confirm') {
        window.__notificationCallbacks[id] = onConfirm;

        notif.innerHTML = `
          <div style="display: flex; align-items: start;">
            <i class="bi bi-question-circle-fill" style="font-size: 2rem; color: #17a2b8; margin-right: 15px;"></i>
            <div style="flex: 1;">
              <h5 style="margin: 0 0 10px 0; color: #333;">Xác nhận</h5>
              <p style="margin: 0 0 15px 0; color: #666;">${message}</p>
              <div style="display: flex; gap: 10px;">
                <button class="confirm-yes" data-id="${id}"
                        style="flex: 1; padding: 12px 20px; background: #17a2b8; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold;">
                  ✓ Xác nhận
                </button>
                <button class="confirm-no" data-id="${id}"
                        style="flex: 1; padding: 12px 20px; background: #6c757d; color: white; border: none; border-radius: 8px; cursor: pointer;">
                  ✕ Hủy
                </button>
              </div>
            </div>
          </div>
        `;
      }

      container.appendChild(notif);

      console.log('Notification created:', id);
      console.log('HTML:', notif.innerHTML);
      console.log('Buttons in DOM:', notif.querySelectorAll('button').length);
    }

    // Event delegation
    document.addEventListener('click', function (e) {
      if (e.target.classList.contains('confirm-yes')) {
        const id = e.target.getAttribute('data-id');
        console.log('YES clicked:', id);
        const cb = window.__notificationCallbacks[id];
        if (cb) {
          cb();
          delete window.__notificationCallbacks[id];
        }
        document.getElementById(id).remove();
      }

      if (e.target.classList.contains('confirm-no')) {
        const id = e.target.getAttribute('data-id');
        console.log('NO clicked:', id);
        delete window.__notificationCallbacks[id];
        document.getElementById(id).remove();
      }
    });

    function testNotif() {
      console.log('=== TEST START ===');
      showNotification('Bạn có chắc muốn thực hiện?', 'confirm', function () {
        console.log('CALLBACK EXECUTED!');
        alert('Success! Callback worked!');
      });
    }
  </script>
</body>

</html>